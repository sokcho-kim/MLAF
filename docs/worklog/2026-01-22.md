# 작업일지 2026-01-22

## 완료 작업

### 1. 지식그래프 프로토타입 구현 (Phase 0)

**목표:** NetworkX로 KG MVP 검증

#### 구현 내용

| 단계 | 작업 | 결과 |
|------|------|------|
| 0-1 | 법률명 추출 함수 | `extract_law_name()` - 92.2% 성공 |
| 0-2 | 법률-부처 매핑 로드 | `load_ministry_laws()` - 21개 부처 |
| 0-3 | NetworkX 그래프 구축 | `build_knowledge_graph()` |
| 0-4 | KG 스코어 계산 | `calculate_kg_score()` |
| 0-5 | 전체 분석 | `analyze_bills()` - 71.6% 매칭 |

#### 검증 결과

```
=== 프로토타입 검증 결과 ===

총 법안: 1,021건
법률명 추출: 941건 (92.2%)
KG 경로 확인: 731건 (71.6%)
```

#### 부처별 KG 매칭 (상위 10)

| 부처 | 소관 법안 |
|------|----------|
| 보건복지부 | 104건 |
| 국토교통부 | 92건 |
| 문화체육관광부 | 65건 |
| 교육부 | 54건 |
| 산업통상부 | 51건 |
| 법무부 | 48건 |
| 해양수산부 | 48건 |
| 기후에너지환경부 | 43건 |
| 행정안전부 | 42건 |
| 국방부 | 36건 |

### 2. KG 강점 확인

1. **설명 가능성**: 경로 제시 가능
   - 예: `법안 → 산업 디지털 전환 촉진법 → 산업통상부`

2. **정확한 소관 파악**:
   - 탄소중립기본법 → 기후에너지환경부 (산업통상부 아님)
   - 법적 소관 관계 기반으로 정확한 판단

### 3. 매칭 실패 원인 분석

- `ministry_laws.json`에 없는 법률 (신규 제정 또는 누락)
- 특수문자 차이 (예: `·` vs 일반 문자)
- 법률명 변경/통폐합

---

## 산출물

```
projects/project-popcorn/
├── src/
│   └── kg_prototype.py          # [NEW] KG 프로토타입 전체 구현
├── docs/
│   └── ihopper/
│       └── knowledge-graph/
│           └── design.md        # [UPDATE] 구현 계획 상세화
```

### kg_prototype.py 주요 함수

```python
# 법률명 추출
extract_law_name(bill_title: str) -> Optional[str]

# 법률-부처 매핑
build_law_to_ministry_map(ministry_laws: Dict) -> Dict[str, List[str]]

# 지식그래프 구축
build_knowledge_graph(bills, ministry_laws) -> KnowledgeGraph

# KG 스코어 계산
calculate_kg_score(bill_id, ministry, kg) -> Tuple[float, Optional[List[str]]]

# 전체 분석
analyze_bills(bills, ministry_laws) -> Dict
```

### CLI 사용법

```bash
# 전체 분석
python3 src/kg_prototype.py --analyze

# 특정 법안 분석
python3 src/kg_prototype.py --bill <bill_id> --ministry 산업통상부
```

---

## 다음 할 일 (Phase 1)

1. [ ] Golden Set으로 정확도 비교 (유사도 vs KG)
2. [ ] 하이브리드 스코어 적용 테스트
3. [ ] False Positive/Negative 분석
4. [ ] 가중치 튜닝 (sim/kg/keyword 비율)

---

## 비고

- ihopper 프로젝트 자료 공유받음 (의안 데이터 파이프라인)
- 지식그래프는 dm 레이어에서 OpenSearch와 함께 운영 예정
- Phase 0 완료, Phase 1 (검증 및 개선) 진행 예정

---

*Last updated: 2026-01-22*
