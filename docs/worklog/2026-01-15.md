# 작업일지 2026-01-15

## 완료 작업

### 1. API 데이터 품질 분석
- 3개 API 실제 데이터 품질 측정
- `research/api_data_quality.py` 분석 스크립트 작성

| API | 주요 필드 | 품질 |
|-----|----------|------|
| 국회의원발의법률안 | COMMITTEE | 64% |
| 국회의원발의법률안 | PROC_RESULT | **0%** (전부 null) |
| 의안상세정보 | COMMITTEE_NM | 99% |
| 의안상세정보 | PROC_RESULT_CD | **100%** |
| BillInfoService2 | summary | 98% |

### 2. API 데이터 현황 리포트 작성
- `docs/data-sync-report.md` 작성
- API별 필드 비교, 품질 분석, 권장 수집 전략 문서화
- 핵심 발견: **PROC_RESULT가 0%인 이유는 국회의원발의법률안 API 자체 문제**

### 3. 데이터 재수집 계획 수립
- `docs/data-collection-plan.md` 작성
- 2단계 수집 + 조인 전략:
  1. 의안상세정보 API → committee, proc_result, vote_info
  2. BillInfoService2 → summary
  3. bill_no 기준 조인

### 4. 데이터 수집 스크립트 작성
| 스크립트 | 용도 |
|---------|------|
| `src/collect_assembly_bills.py` | 의안상세정보 수집 |
| `src/collect_summary.py` | BillInfoService2 summary 수집 |
| `src/merge_bill_data.py` | 데이터 조인 + 샘플링 |

### 5. API 비용 추적 설정
- `api_pricing.yaml` 업데이트
  - Solar Embedding: $0.00015/1K tokens
  - text-embedding-3-small: $0.02/1M tokens
  - text-embedding-3-large: $0.13/1M tokens
- 현재까지 project-popcorn 비용: $0 (미기록)
- 전체 기록 비용: $1.48 (khima 프로젝트, 2025-12-05)

## 발견사항

### API 데이터 싱크 문제
```
[국회의원발의법률안 API]
- PROC_RESULT 필드가 모두 null → 사용 불가
- COMMITTEE 64%만 채워짐

[의안상세정보 API]
- PROC_RESULT_CD 100% → 이걸 써야 함
- COMMITTEE_NM 99%

[공공데이터포털]
- summary 98% → 제안이유 수집에 최적
- committee 필드 없음
```

### 처리결과(PROC_RESULT_CD) 값
- 원안가결, 수정가결, 대안반영, 철회, 폐기, 부결

## 다음 할 일 (TODO)
1. [ ] 데이터 수집 실행 (3개 스크립트 순차 실행)
2. [ ] 수집 결과 품질 검증
3. [ ] Golden Set v2 재선정 (처리완료 법안 포함)
4. [ ] 본문 포함 임베딩 v2 테스트

## 산출물

```
projects/project-popcorn/
├── docs/
│   ├── data-sync-report.md      # API 데이터 현황 리포트
│   └── data-collection-plan.md  # 데이터 재수집 계획
├── research/
│   └── api_data_quality.py      # 데이터 품질 분석 스크립트
└── src/
    ├── collect_assembly_bills.py  # 의안상세정보 수집
    ├── collect_summary.py         # summary 수집
    └── merge_bill_data.py         # 데이터 조인

scrape-hub/shared/config/
└── api_pricing.yaml             # 임베딩 API 단가 추가
```

## 비용
- 오늘 API 비용: $0.00
- 이번 달 누적: $0.00
